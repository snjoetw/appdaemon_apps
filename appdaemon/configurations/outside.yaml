front_yard_lighting:
  module: timer_motion_lighting
  class: TimerMotionLighting
  enabler_entity_id: input_boolean.is_motion_enabled_front_yard
  scene_entity_id: input_select.lighting_mode_front_yard
  motion_entity_id:
    - binary_sensor.front_yard_camera_motion_detected
  turn_off_delay: 300
  timer:
    turn_on_start_time: '16:00:00'
    turn_on_end_time: '22:00:00'
  lighting_scenes:
    Dark:
      - entity_id: light.zwave_front_yard_light
        brightness: 255
        force_on: false
        force_off: false


front_door_lighting_on_motion:
  module: motion_lighting
  class: MotionLighting
  enabler_entity_id: input_boolean.is_motion_enabled_front_door
  scene_entity_id: input_select.lighting_mode_front_yard
  motion_entity_id: binary_sensor.front_door_camera_person_detected
  turn_off_delay: 120
  lighting_scenes:
    Dark:
      - entity_id: light.zwave_front_door_light
        brightness: 200


front_door_lighting_on_door_open:
  module: automation
  class: Automation
  triggers:
    - platform: state
      entity_id: binary_sensor.mqtt_front_door
    - platform: state
      entity_id: lock.front_door_lock_locked
  handlers:
    - constraints:
        - platform: state
          entity_id: input_select.lighting_mode_front_yard
          state: [Dark]
        - platform: triggered_state
          to:
            - "on"
            - "unlocked"
      actions:
        - platform: turn_on
          entity_ids:
            light.zwave_front_door_light:
              brightness: 255
    - constraints:
        - platform: triggered_state
          entity_id: binary_sensor.mqtt_front_door
          to: "off"
      actions:
        - platform: delay
          delay: 120
          actions:
            - platform: turn_off
              entity_ids:
                light.zwave_front_door_light:
                  force_off: false


backyard_lighting:
  module: timer_motion_lighting
  class: TimerMotionLighting
  scene_entity_id: input_select.lighting_mode_backyard
  motion_entity_id:
    - binary_sensor.backyard_multisensor_sensor
    - binary_sensor.rear_driveway_camera_motion_detected
  turn_off_delay: 300
  timer:
    turn_on_start_time: '16:00:00'
    turn_on_end_time: '22:00:00'
  lighting_scenes:
    Dark:
      - entity_id: switch.zwave_backyard_light
      - entity_id: light.hue_backyard_spot_light
        brightness: 150
        force_on: false
        force_off: false


front_yard_activity_publisher:
  module: automation
  class: Automation
  triggers:
    - platform: state
      entity_ids:
        - binary_sensor.front_yard_camera_front_yard_activity
        - binary_sensor.front_yard_camera_motion_detected
        - binary_sensor.front_yard_camera_person_detected
        - binary_sensor.front_yard_camera_sound_detected
  handlers:
    - constraints:
      actions:
        - platform: service
          service: mqtt/publish
          data:
            topic: home/sensor/front_yard_activity
            payload: "{{ trigger_info.data.to }}"


front_door_activity_publisher:
  module: automation
  class: Automation
  triggers:
    - platform: state
      entity_ids:
        - binary_sensor.front_door_camera_front_door_activity
        - binary_sensor.front_door_camera_motion_detected
        - binary_sensor.front_door_camera_person_detected
        - binary_sensor.front_door_camera_sound_detected
  handlers:
    - constraints:
      actions:
        - platform: service
          service: mqtt/publish
          data:
            topic: home/sensor/front_door_activity
            payload: "{{ trigger_info.data.to }}"
